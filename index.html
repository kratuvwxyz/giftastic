<!doctype html>
<html lang="en">
<!-- === -->
<!-- === -->
<!-- === -->
<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!--<meta http-equiv="refresh" content="10" />just for auto-refresh in dev-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="#DESAIGNER" />
<meta name="description" content="#"/> 
<meta name="keywords" content="#"/>
<link rel="shortcut icon" href="assets/images/favicon.ico" />
<title>GOT gif?</title>
<!--===CSS===-->
<!-- reset CSS -->
	<link rel="stylesheet" type="text/css" href="assets/css/reset.css">
<!-- other CSS -->
	<!--Awesome Fonts Library-->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!------->
	<!--BootStrap CSS-->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
	<!------->
<!-- developer CSS -->
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">

</head>

<body class="bg-info">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>		
<script type="text/javascript" src="assets/js/main.js"></script>	

		<header class="bg-dark p-4">
		<a href="#"><span class="text-info navbar-brand"><img src="https://fontmeme.com/permalink/180513/d0ff90780e55eaba59ea4fe17a17f9bd.png" width="75%" height="75%"></span></a>
	</header>

	<section>
		<nav class="navbar navbar-dark bg-dark">
				  <form class="form-inline" id="gameOfGifronNav">
					<button data-game="Game of Thrones" class="btn btn-outline-light search m-1" type="button">Game Of Thrones</button>
					<button data-game="Game of Thrones season 1" class="btn btn-outline-light search m-1" type="button">Season 1</button>
					<button data-game="Game of Thrones season 2" class="btn btn-outline-light search m-1" type="button">Season 2</button>
					<button data-game="Game of Thrones season 3" class="btn btn-outline-light search m-1" type="button">Season 3</button>
					<button data-game="Game of Thrones season 4" class="btn btn-outline-light search m-1" type="button">Season 4</button>
					<button data-game="Game of Thrones season 5" class="btn btn-outline-light search m-1" type="button">Season 5</button>
					<button data-game="Game of Thrones season 6" class="btn btn-outline-light search m-1" type="button">Season 6</button>
					<button data-game="Game of Thrones season 7" class="btn btn-outline-light search m-1" type="button">Season 7</button>
				  </form>
		</nav>
	</section>
	<div class="row bg-danger">
		<div class="col-xl-12">
			<nav class="navbar navbar-danger bg-danger">
				<form class="form-inline" id="movie-form">
					<input class="form-control mr-sm-2" type="search" id="movie-input" placeholder="You know nothing..." aria-label="Search">
					<i class="btn btn-outline-danger my-2 my-sm-0 fa fa-search" id="add-movie" type="submit"></i>
				</form>
						<form class="form-inline" id="emptyButton">
							<strong class="text-warning">Your Search Results: &#160;&#160;</strong>
							<div id="movies-view"></div>							
<!--							<div><button class="btn btn-outline-warning m-1" type="button" data-game="game of thrones winter is coming">Winter is coming!</button></div>							-->
						</form>
			</nav>
		</div>
	</div>
	
	
	<div class="p-3 bg-info main" id="gifs-appear-here"></div>
	
	<script type="text/javascript">
	var movies = ["You know nothing, Jon Snow", "Winter is coming!"];

	// Function for displaying movie data
	function renderButtons() {
	// Deleting the movie buttons prior to adding new movie buttons
	// (this is necessary otherwise we will have repeat buttons)
	$("#movies-view").empty();

	// Looping through the array of movies
	for (var i = 0; i < movies.length; i++) {

	// Then dynamicaly generating buttons for each movie in the array.
	// This code $("<button>") is all jQuery needs to create the start and end tag. (<button></button>)
	var a = $("<button>");
	// Adding a class
	a.addClass("btn btn-outline-warning m-1");
	// Adding a data-attribute with a value of the movie at index i
	a.attr("data-game", movies[i]);
	// Providing the button's text with a value of the movie at index i
	a.text(movies[i]);
	// Adding the button to the HTML
	$("#movies-view").append(a);
		}
	}

	// This function handles events where one button is clicked
	$("#add-movie").on("click", function(event) {
	// event.preventDefault() prevents the form from trying to submit itself.
	// We're using a form so that the user can hit enter instead of clicking the button if they want
	event.preventDefault();

	// This line will grab the text from the input box
	var movie = $("#movie-input").val().trim();
	// The movie from the textbox is then added to our array
	movies.push(movie);

	// calling renderButtons which handles the processing of our movie array
	renderButtons();
	});

	// Calling the renderButtons function at least once to display the initial list of movies
		renderButtons();
//	$(renderButtonClick).on("click", function(event){
//		event.preventDefault();
//	});
		
	

	// Adding click event listen listener to all buttons
	$("button").on("click", function(event) {
		


			// event.preventDefault() can be used to prevent an event's default behavior.
			// Here, it prevents the submit button from trying to submit a form when clicked
			event.preventDefault();

			  // Grabbing and storing the data-GOT property value from the button
			  var GOT = $(this).attr("data-game");

			  // Constructing a queryURL using the GOT name
			  var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
				GOT + "&api_key=dc6zaTOxFJmzC&limit=12";

			  // Performing an AJAX request with the queryURL
			  $.ajax({
				url: queryURL,
				method: "GET"
			  })

			// After data comes back from the request
			.then(function(response) {
			  console.log(queryURL);
			  console.log(response);

				// storing the data from the AJAX request in the results variable
				var results = response.data;

				// Looping through each result item
				for (var i = 0; i < 12; i++) {

					//Creating main div container
					var main = $("<div>").addClass("specialmain");

					// Creating and storing a div tag
					var gameGifDiv = $("<div>").addClass("figure");

					// Creating and storing an image tag
					var gameGifImage = $("<img>").addClass("card awesomeImage");

					// Setting the src attribute of the image to a property pulled off the result item
					gameGifImage.attr("src", results[i].images.fixed_width.url);

					// Creating a paragraph tag with the result item's rating
					var p = $("<p>").text("Rating: " + results[i].rating);
					var s = $("<p>").text("Search: " + GOT);

					// Appending the paragraph and image tag to the gameGifDiv

					gameGifDiv.append(p);
					gameGifDiv.append(gameGifImage);
					gameGifDiv.append(s);
					main.append(gameGifDiv);

				// Prependng the gameGifDiv to the HTML page in the "#gifs-appear-here" div
				$("#gifs-appear-here").prepend(main);

			  }
			});
		});


	</script>

</body>
</html>
